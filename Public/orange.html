<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portfolio</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
  <link rel="stylesheet" href="stylee.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">

</head>
<body>

  <!-- A. 封面 -->
<section class="cover parallax-hero" id="home">
  <div class="hero-inner">

    <!-- 背景：用 img 也可以（之後你想換成 CSS background 也行） -->
    <img class="hero-bg" src="imgg/cover-bg4.jpg" alt="cover background">

    <!-- 左右樹（去背 PNG） -->
    <img id="treeLeft" class="hero-tree hero-tree-left" src="imgg/tree-left.png" alt="left tree">
    <img id="treeRight" class="hero-tree hero-tree-right" src="imgg/tree-left.png" alt="right tree">

    <!-- 中間素材：從小變大 -->
    <img id="heroAsset" class="hero-asset" src="imgg/new.png" alt="center asset">

    <!-- 你原本的標題文字（保留也行） -->
    <div class="cover-text hero-title">
      Hello world!</span>
    </div>

  </div>
</section>


  <!-- B. Quick Browse -->
  <section class="quick" id="works">
    <div class="quick-inner">
      <div class="quick-track" id="quickTrack">
        <a class="quick-card"><img src="imgg/pic1.jpg"></a>
        <a class="quick-card"><img src="imgg/pic2.png"></a>
        <a class="quick-card"><img src="imgg/pic3.jpg"></a>
        <a class="quick-card"><img src="imgg/pic4.png"></a>
        <a class="quick-card"><img src="imgg/pic5.JPG"></a>
        <a class="quick-card"><img src="imgg/pic6.png"></a>
      </div>
      <div class="quick-caption">
        <div class="quick-title reveal-text">Showcase</div>
        <div class="quick-sub reveal-text">Scroll to skim projects fast</div>
      </div>
    </div>
  </section>

  <!-- D. About -->
  <section class="about" id="about">
    <div class="about-bg">
      <!-- about 背景漂浮物件（可換成你的核桃圖） -->
      <img class="about-float f1" src="imgg/pic33.png" alt="">
      <img class="about-float f2" src="imgg/pic34.png" alt="">
    </div>


    <div class="about-inner">
      <div class="about-text">
        <h2 class="reveal-text">ABOUT ME</h2>
        <p class="reveal-text">嗨，我是 Tso Ling Yu，目前就讀國立臺中科技大學多媒體設計系。</p>
        <p class="reveal-text">熟悉 Figma、InDesign、AE、Premiere、Maya。</p>
      </div>
      <div class="about-photo">
        <img src="imgg/img2.JPG">
      </div>
    </div>
  </section>

  <!-- C. 大作品橫向 -->
  <section class="h-section" id="hSection">
    <div class="h-sticky">
      <div class="h-track" id="hTrack">
        <a class="work"><img src="imgg/pic30.png"></a>
        <a class="work"><img src="imgg/pic29.png"></a>
        <a class="work"><img src="imgg/pic32.png"></a>
        <a class="work"><img src="imgg/pic27.png"></a>
      </div>
    </div>
  </section>


<section class="quote-section" id="quote">
  <div class="quote-inner">
    <h2 class="quote-line quote-line-1" id="quoteTyping1"
      data-text="Courage is not the absence of fear,"></h2>

    <h2 class="quote-line quote-line-2" id="quoteTyping2"
      data-text="but the triumph over it."></h2>
  </div>
</section>




  <!-- E. Connect Me（含地圖） -->
  <section class="connect" id="contact">
    <div class="connect-inner">

      <!-- 左：標題 + 地圖 -->
      <div class="connect-left">
        <h2 class="connect-title reveal-text">CONECT ME</h2>
        <div id="map" class="connect-map"></div>
      </div>

      <!-- 右：表單 -->
      <!-- 先確保 CONNECT ME 這塊外面有一個 Vue 容器 -->
      <div id="app">
        <form @submit.prevent="send">
          <input type="email" placeholder="Email" v-model="form.email" required>
          <input type="text" placeholder="Phone" v-model="form.phone">
          <input type="text" placeholder="Name" v-model="form.name">
          <textarea placeholder="Message" v-model="form.message"></textarea>
          <button type="submit">Send</button>


        </form>

        <!-- 送出結果顯示區（先放著，下一步會用到） -->
        <p v-if="msg" class="saveMsg">{{ msg }}</p>

      </div>



    </div>
  </section>

  <!-- ✅ F. Footer（頁腳） -->
  <footer class="footer">
    <div class="footer-inner">

      <!-- 左：Logo（先用 placeholder，你之後換成圖片） -->
      <div class="footer-brand">
        <div class="footer-logo" aria-hidden="true"></div>
        <div class="footer-name ">Tso Ling Yu</div>
      </div>

      <!-- 右：書籤 + 社群 -->
      <div class="footer-right">
        <nav class="footer-nav">
          <a href="#home">Home</a>
          <a href="#works">Works</a>
          <a href="#about">About</a>
          <a href="#contact">Contact</a>
        </nav>

        <div class="footer-social">
          <!-- Instagram -->
          <a href="#" aria-label="Instagram" class="icon-btn">
            <svg viewBox="0 0 24 24" class="icon" aria-hidden="true">
              <path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 4a6 6 0 1 1 0 12a6 6 0 0 1 0-12zm0 2a4 4 0 1 0 0 8a4 4 0 0 0 0-8zm6.5-.6a1.1 1.1 0 1 1-2.2 0a1.1 1.1 0 0 1 2.2 0z"/>
            </svg>
          </a>

          <!-- Twitter/X -->
          <a href="#" aria-label="X" class="icon-btn">
            <svg viewBox="0 0 24 24" class="icon" aria-hidden="true">
              <path fill="currentColor" d="M18.9 2H22l-6.8 7.8L23 22h-6.5l-5.1-6.4L5.7 22H2l7.3-8.4L1 2h6.6l4.6 5.8L18.9 2zm-1.1 18h1.7L7.5 3.9H5.7L17.8 20z"/>
            </svg>
          </a>

          <!-- YouTube -->
          <a href="#" aria-label="YouTube" class="icon-btn">
            <svg viewBox="0 0 24 24" class="icon" aria-hidden="true">
              <path fill="currentColor" d="M21.6 7.2a3 3 0 0 0-2.1-2.1C17.7 4.6 12 4.6 12 4.6s-5.7 0-7.5.5A3 3 0 0 0 2.4 7.2A31 31 0 0 0 2 12a31 31 0 0 0 .4 4.8a3 3 0 0 0 2.1 2.1c1.8.5 7.5.5 7.5.5s5.7 0 7.5-.5a3 3 0 0 0 2.1-2.1A31 31 0 0 0 22 12a31 31 0 0 0-.4-4.8zM10 15.5v-7l6 3.5-6 3.5z"/>
            </svg>
          </a>
        </div>
      </div>

    </div>
  </footer>

  <!-- Leaflet JS（一定要在你自己的 script 前） -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    //  大作品橫向滾動 
    const section = document.getElementById("hSection");
    const track = document.getElementById("hTrack");

    function updateHorizontalScroll() {
      const rect = section.getBoundingClientRect();
      const viewH = window.innerHeight;
      const totalScroll = section.offsetHeight - viewH;
      const scrolled = Math.min(Math.max(-rect.top, 0), totalScroll);
      const progress = totalScroll === 0 ? 0 : scrolled / totalScroll;
      const maxX = track.scrollWidth - window.innerWidth;
      track.style.transform = `translateX(${-progress * maxX}px)`;
    }

    function setSectionHeight() {
      section.style.height =
        window.innerHeight + (track.scrollWidth - window.innerWidth) + "px";
    }

    window.addEventListener("scroll", updateHorizontalScroll);
    window.addEventListener("resize", () => {
      setSectionHeight();
      updateHorizontalScroll();
    });

    setSectionHeight();
    updateHorizontalScroll();

    
    window.addEventListener("load", () => {
      const map = L.map("map").setView([24.1503, 120.6839], 13);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19
      }).addTo(map);

      L.marker([24.1503, 120.6839]).addTo(map).bindPopup("Ling Yu");

      setTimeout(() => map.invalidateSize(), 200);
    });
    //  Quick Browse：在區塊內，把滾輪轉成左右滑（到邊界就放行上下滾）
const quickTrack = document.getElementById("quickTrack");

function isQuickReady(el) {
  const r = el.getBoundingClientRect();
  const vh = window.innerHeight;

  // 元素在畫面中可見的高度
  const visible = Math.min(r.bottom, vh) - Math.max(r.top, 0);
  const ratio = visible / r.height;

  // 至少露出 70% 才開始接管滾輪（你可把 0.7 改成 0.8 或 0.6）
  return ratio >= 0.6;
}


window.addEventListener("wheel", (e) => {
  if (!quickTrack) return;
  if (!isQuickReady(quickTrack)) return;


  const SPEED = 9;

  const maxScrollLeft = quickTrack.scrollWidth - quickTrack.clientWidth;
  const atStart = quickTrack.scrollLeft <= 0;
  const atEnd = quickTrack.scrollLeft >= maxScrollLeft - 1;

  const goingRight = e.deltaY > 0; // 往下 = 往右
  const goingLeft = e.deltaY < 0;  // 往上 = 往左

  const canScrollHorizontally =
    (goingRight && !atEnd) || (goingLeft && !atStart);

  if (canScrollHorizontally) {
    e.preventDefault();
    quickTrack.scrollLeft += e.deltaY * SPEED;
  }
}, { passive: false });

//  About Me：背景物件隨滾輪往上飄 
const aboutSection = document.querySelector(".about");

function updateAboutFloat() {
  if (!aboutSection) return;

  const r = aboutSection.getBoundingClientRect();
  const vh = window.innerHeight;

  // 進入 about 到離開 about 的進度 0~1
  const start = vh;                 // about 下面剛碰到視窗底部
  const end = -r.height;            // about 完全離開視窗上方
  const t = (start - r.top) / (start - end);
  const progress = Math.max(0, Math.min(1, t));

  // 往上飄距離（想更明顯就加大）
  const y1 = (1 - progress) * 400;  // 左：飄 180px
  const y2 = (1 - progress) * 300;  // 右：飄 260px

  // 讓兩顆核桃速度不同，看起來比較像飄
  const f1 = aboutSection.querySelector(".about-float.f1");
  const f2 = aboutSection.querySelector(".about-float.f2");
  if (f1) f1.style.setProperty("--aboutY", `${y1}px`);
  if (f2) f2.style.setProperty("--aboutY", `${y2}px`);
}

window.addEventListener("scroll", updateAboutFloat, { passive: true });
window.addEventListener("resize", updateAboutFloat);
updateAboutFloat();

// ====== Cover Parallax（兩棵樹左右移 + 中間素材放大） ======
gsap.registerPlugin(ScrollTrigger);

// 用 timeline 比較好控：封面 pinned 一段距離，做完就放行往下滾
const heroTL = gsap.timeline({
  scrollTrigger: {
    trigger: ".parallax-hero",
    start: "top top",
    end: "+=90%",     // 這段就是「滾動做動畫」的距離（可調大/小）
    scrub: true,
    pin: true,
    anticipatePin: 1
  }
});

// 兩棵樹往旁邊移
heroTL.to("#treeLeft", { x: -350 }, 0);
heroTL.to("#treeLeft", { y: 300 }, 0);
heroTL.to("#treeRight", { x: 350 }, 0);
heroTL.to("#treeRight", { y: 300 }, 0);
heroTL.to(".parallax-hero .hero-title", { opacity: 1 }, 0);


// 中間素材從小變大（你要更大就 1.2、1.4 之類）
heroTL.to("#heroAsset", { scale: 1.5 }, 0);


// 背景微微放大（有視差感，想要就留，不想就刪）
heroTL.to(".hero-bg", { scale: 1.2 }, 0);


gsap.utils.toArray(".reveal-text").forEach((el) => {
  gsap.to(el, {
    opacity: 1,
    y: 0,
    ease: "power2.out",
    scrollTrigger: {
      trigger: el,
      start: "top 70%",   // 元素進畫面一點點就開始
      end: "top 10%",
      scrub: true
      // 如果你想「不要跟著滾動」，改成：
      // scrub: false,
      // toggleActions: "play none none reverse"
    }
  });
});


// ====== About Photo：滾到 About 時照片彈出 + 彈跳兩次 ======
const aboutPhoto = document.querySelector(".about-photo img");

if (aboutPhoto) {
  gsap.set(aboutPhoto, { transformOrigin: "50% 50%" });

  const photoTL = gsap.timeline({
    scrollTrigger: {
      trigger: ".about",
      start: "top 10%",                 // About 區塊進到畫面 70% 就開始
      toggleActions: "play none none reverse" 
      // 想要只出現一次、不倒帶：改成 "play none none none"
    }
  });

  photoTL
    // 先「突然彈出」
    .from(aboutPhoto, {
      opacity: 0,
      scale: 0.2,
      y: 80,
      duration: 0.35,
      ease: "back.out(2.6)"
    })
    // 第一次彈跳（超過 1 再回來）
    .to(aboutPhoto, { scale: 1.12, duration: 0.14, ease: "power2.out" })
    .to(aboutPhoto, { scale: 0.96, duration: 0.12, ease: "power2.inOut" })
    // 第二次彈跳（幅度小一點）
    .to(aboutPhoto, { scale: 1.05, duration: 0.12, ease: "power2.out" })
    .to(aboutPhoto, { scale: 1.00, duration: 0.10, ease: "power2.inOut" });
}


// ===== Quote Section：滾動視差文字（淡->亮、糊->清、微移動）=====
gsap.registerPlugin(ScrollTrigger);

gsap.to(".quote-line", {
  scrollTrigger: {
    trigger: ".quote-section",
    start: "top 75%",
    end: "top 25%",
    scrub: true
  },
  color: "rgba(255,255,255,0.95)",
  filter: "blur(0px)",
  y: 0,
  scale: 1
});


// ===== Quote Section：滾動視差 + 打字效果（只新增）=====
// ===== Quote Section：兩行打字 + 滾動變清楚（只新增/替換 quote 那段）=====
(() => {
  const l1 = document.getElementById("quoteTyping1");
  const l2 = document.getElementById("quoteTyping2");
  if (!l1 || !l2) return;

  const t1 = l1.dataset.text || l1.textContent.trim();
  const t2 = l2.dataset.text || l2.textContent.trim();
  l1.textContent = "";
  l2.textContent = "";

  let typed = false;

  // ✅ 滾動視差：兩行一起從糊->清、淡->亮、往上回到定位
  gsap.to([l1, l2], {
    scrollTrigger: {
      trigger: ".quote-section",
      start: "top 80%",
      end: "top 30%",
      scrub: true
    },
    color: "rgba(255,255,255,0.92)",
    filter: "blur(0px)",
    y: 0
  });

  // ✅ 打字：進入時一次打完（先第一行，再第二行）
  ScrollTrigger.create({
    trigger: ".quote-section",
    start: "top 20%",
    once: true,
    onEnter: async () => {
      if (typed) return;
      typed = true;

      const typeLine = (el, text, speed = 28) =>
        new Promise((resolve) => {
          let i = 0;
          const timer = setInterval(() => {
            i++;
            el.textContent = text.slice(0, i);
            if (i >= text.length) {
              clearInterval(timer);
              resolve();
            }
          }, speed);
        });

      await typeLine(l1, t1, 22);
      await typeLine(l2, t2, 22);
    }
  });
})();
  </script>

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>


<script>
const { createApp } = Vue;

createApp({
  data() {
    return {
      form: { email: "", phone: "", name: "", message: "" },
      msg: ""
    };
  },
  methods: {
    async send() {
      this.msg = "Sending...";

      try {
        const r = await fetch("/contact", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(this.form)
        });

        const result = await r.json();

        // 顯示訊息
        this.msg = result.message || "OK";

        // ✅ 成功：清空表單
        if (result.ok) {
          this.form = { email: "", phone: "", name: "", message: "" };

          // ✅ 2 秒後自動把 Saved! 清掉
          setTimeout(() => {
            this.msg = "";
          }, 2000);
        }
      } catch (err) {
        this.msg = "Send failed: " + err;
      }
    }

  }
}).mount("#app");
</script>
<script src="js/main.js"></script>



</body>
</html>